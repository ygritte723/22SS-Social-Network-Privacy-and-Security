---
typora-copy-images-to: ./Part2.assets
---

<h1 align = "center">Proxy Traffic Analysis</h1>

<h3 align = "center">Group 2</h3>




<!--导出----导出设置----按一级标题分页-->

<!--封面页有点草率……到时候换一个吧-->


# Introduction

​		This is the project report of the Group 2 of the "Privacy and Security in Online Social Network" course in the summer semester of the 2021-2022 academic year.





# Background

As we all know, mobile data is a precious commodity these days. If your internet service provider offers a limited data plan, you know how expensive crossing that line can get. On the other hand, if you have more bandwidth than you need or you're blessed with a flat-rate connection, you could sell it and make some extra money. This is where the IPRoyal Pawns app comes in.

### How does it work?

By sharing your internet connection through the IPRoyal Pawns app, business partners can access the web from your location. That way, you help others view the internet as it is perceived by real people - without any location restrictions or censorship. 

 The User’s device becomes a **gateway** which allows IPRoyal to send and receive internet traffic. This traffic is used by IPRoyal and its Clients. There’s really no point in installing it on multiple computers connected to the same network since the program will only be able to read one IP address.

#### Frequent cases

- Corporate Intelligence and SEO

- Brand Awareness and Protection

- Advertising Verification

  Some will use it to gain access to geo-blocked content, while some companies will use it to check whether their ads are running correctly and showing up on the right websites.

- Software Testing

  Some companies will use your unused bandwidth to enhance their testing process to improve their apps so that their users will experience the app content as it was meant to.

- Content Distribution

- Market Research

![image-20220608154141674](Part2.assets/image-20220608154141674-4674103.png)

### Security

- All clients need to confirm their identity by providing their name and valid documents. That way, IPRoyal knows who they are. They also make sure all the traffic their trusted partners use is 100% safe.
- The app itself has no access to your storage and does not gather any personal data. They only use the information needed to make the service work - your **IP address, network speed, and location**. All traffic is fully encrypted, so there are no compromises in terms of privacy. IPRoyal don't bundle any additional software with the installation, and the app itself contains no ads.
- Payment: Unlike other similar solutions that pay in obscure cryptocurrencies, IPRoyal Pawns pays cash via PayPal and Bitcon.  And it pays you 0.20USD per GB shared.
- IPRoyal does **not** plan or intend to collect any personal information on children below the age of 14 or any other age that requires approval or consent of a parental responsibility holder for the purpose of collection and/or processing of personal data of such an individual.

### Your rights in relation to your personal information

As a data subject, you have the following rights in relation to your personal information under the General Data Protection Regulation (GDPR) and the California Consumer Privacy Act (CCPA):

- Right of access – IPRoyal is obligated to provide you with access to any data IPRoyal collected on you;
- Right to modify – You have the right to input and update your information in our application;
- Right to remove – You preserve the right to ask us to delete your personal information. 

You preserve the right to access, modify, and remove your information. In most cases, this can be done by simply signing in and updating your IPRoyal preferences. You can also exercise the following rights:

- Restrict the processing of your data in case of unlawful processing;
- Oppose the processing of your data if it’s legally based on IPRoyal’s genuine interests and is in violation of your fundamental rights and freedoms. Please keep in mind that IPRoyal preserve the possibility of being able to prove our genuine interest outweighs your rights and freedoms:
- Collect your data in an electronic, computer-friendly form, and/or urge us to forward your data to another controller;
- File a complaint regarding the way IPRoyal use your data. In case you believe IPRoyal mismanaged your data or acted against the law in relation to your privacy, you preserve the right to file a complaint with a relevant supervisory authority.

### Data rentention and storage

IPRoyal will not keep any of your personal data that they process for any purpose any longer than necessary for that purpose. They will not keep it for longer than five years after the end of their contractual or any other relations with you.

#### Exact data accessed

- **Your email** is used as your username. It is required for the purpose of signing in to the IPRoyal application. They also use your email to inform you of important announcements in relation to your account and the updates to our service.
- **User payment information** is necessary for transferring your earnings to an account of your choice. This information is processed depending on your preferred payment method (PayPal, Payoneer, or cryptocurrency).
- **Device information** includes your  **IP address, version of the operating system you’re running, the model of the device you’re using, current charging state, last seen time stamp, and your physical location (city and country)**. This information is used to verify if IPRoyal can use your device’s resources and to access and collect data from public internet resources.
- **Network information** includes the current state of your WiFi, so IPRoyal can avoid using your device when it’s using mobile network data.
- For the purposes of analyzing and improving our service, IPRoyal also collect accumulated statistics in relation to the use of our application. This information can include **error and crash reports and application usage analytics**. This data is processed based upon our interest to improve the functionality and usability of our services and applications.

### Complaints

<iframe id="reddit-embed" src="https://www.redditmedia.com/r/beermoneyindia/comments/nw18pv/stay_away_from_ip_royal_pawns/?ref_source=embed&amp;ref=share&amp;embed=true" sandbox="allow-scripts allow-same-origin allow-popups" style="border: none;" height="693" width="640" scrolling="no"></iframe>

It turns out to be a common kind of .exe bug, and it can happen to any software.  Sometimes app crash and we relaunch it again without closing last application.  However it's not related with chrome problems or hacking. IPRoyal monitors all traffic that it would be used only on legal cases. Also nobody can connect to your computer through IPRoyal pawns only your IP and your traffic are used. 

<iframe id="reddit-embed" src="https://www.redditmedia.com/r/beermoneyindia/comments/nw18pv/stay_away_from_ip_royal_pawns/h19monu/?depth=1&amp;showmore=false&amp;embed=true&amp;showmedia=false" sandbox="allow-scripts allow-same-origin allow-popups" style="border: none;" height="195" width="640" scrolling="no"></iframe>

However, there are a bunch of people feels apps like this is really harmful.

### Top Alternatives & Competitors to IPRoyal

- HoneyGain
- PacketStream
- Peer2Profit

<img src="Part2.assets/image-20220608160541341-4675543.png" alt="image-20220608160541341" style="zoom:50%;" />

### [IPRoyal's insight on Regulatory impasse within the web-scraping industry](https://www.electronicspecifier.com/industries/security/regulatory-impasse-within-the-web-scraping-industry)

Industry expert Karolis Toleikis, CEO of[ ](https://u7061146.ct.sendgrid.net/ls/click?upn=4tNED-2FM8iDZJQyQ53jATUYewBvjEUddceK-2BIUzP4q8I-3DuDqx_MIrEM-2BrZpMRx7MPtwKpnFvdFUWWFtQgvH0m80tMwlZ97SFZBbjh1jKMpJKKBeHrac2gjzY3zp7wf0YMytkJ-2Bxf4zZIjKAi6lhYiwzdVFeObcUatjpBirncg8KZACZusSxo0gbAiXHWVVZliebLAacA2k87DRsbPsmavAOXEQYeXywDUh5-2FS4ybc3ykDonxxEOuaYuvV-2FqgOhVtSH9Gk7R9V7JRQoYuIGVqnmWzab3dRvWO2Bbicee-2BX1qaPbZtzcF81mRT36WFv0YS3p41tZyYNsfSnje8VZk5LqmBokTYeFLESdahLVNDQa85TvHPrc5xt-2FztGf6lWR1xKVefvyyRd6tEQ9c9M0mdPnCXt6T-2FQ-3D)[IPRoyal](https://u7061146.ct.sendgrid.net/ls/click?upn=4tNED-2FM8iDZJQyQ53jATUYewBvjEUddceK-2BIUzP4q8I-3DLgSj_MIrEM-2BrZpMRx7MPtwKpnFvdFUWWFtQgvH0m80tMwlZ97SFZBbjh1jKMpJKKBeHrac2gjzY3zp7wf0YMytkJ-2Bxf4zZIjKAi6lhYiwzdVFeObcUatjpBirncg8KZACZusSxo0gbAiXHWVVZliebLAacA2k87DRsbPsmavAOXEQYeXywDUh5-2FS4ybc3ykDonxxEOuaYuvV-2FqgOhVtSH9Gk7R1JK1PUENHZCgFy-2F-2BwBZQv38XPTatsI-2FF19UFkKPlGRPIqmEcNDi8V16TY-2FRT7BFWp5MPi5wFOkgT7qK8tHSi2sVrUNhpvRRUR5EObeAHnIeqeMmOEHN4k8ADeKnLJ2eo9QrqqIqQlOOdPVyvWCfZBo-3D) has shared insights on the regulatory controversy in the sector.

While stating that it would be more efficient to have an independent industry regulator, Toleikis described the various self-regulatory measures that his company has taken to ensure that scraping is done ethically and data is not used for malicious acts. 

“We closely monitor all clients’ requests for unusual patterns,” Toleikis said. “If we notice more requests than usual, we suspend the account immediately and ask the client to provide more details about that particular case”. He also adds that his practice has proved to be 100% effective so far.”

In the absence of a blanket constitutional framework that governs the practice, Toleikis opines that internet users need to get better educated about the legal implications of the activities that they carry out on the internet as well as information that they share. As a passive income IPRoyal Pawns app provider that helps users to share their unused bandwidth he added, “We always ask people who want to share their internet connection with us to carefully check their country’s laws and make sure they’re not doing anything illegal.”

<img src="Part2.assets/image-20220608160740400.png" alt="image-20220608160740400" style="zoom:50%;" />







# Explore iproyal

### Set up the environment

​		Next, we will try using iproyal. First, we need to set up corresponding environment.

​		First, register an account on the official website of iproyal (https://pawns.iproyal.com/register) and bind our own email.

​		Then log in with the registered account to enter the main interface of iproyal. We can see that iproyal provides applications based on windows, Android, MacOS and other platforms.

<img src="Part2.assets/part2-1.png" alt="image-20220607211207665" style="zoom: 33%;" />

​		Download and install the application of the corresponding platform locally, and then we can run it.

### Start earning income

​		Run iproyal locally, log in with personal account, and the program will run automatically. The interface is as follows:

<img src="Part2.assets/part2-2.png" alt="image-20220607211916920" style="zoom: 33%;" />

​		After a while, we can see that pawns is running and our encrypted network connection is being shared, which means that we are connected to the shared network.

### Run for a period of time

​		It seems that as long as we keep it running here, the income will be automatically transferred to our account after a period of time.

​		In fact, I tried to run it myself for a long time. The final result is shown in the figure above. Only 0.0001GB of traffic is used. According to the prompt in the iproyal help interface, you can exchange 0.2 US dollars for each GB of traffic, and withdraw at least 5 US dollars to your account each time. This traffic is too small to get any benefit from it.

<img src="Part2.assets/part2-3.png" alt="image-20220607211916920" style="zoom: 50%;" />

​		In addition, another question is whether it is safe for this application to lease our network traffic to other applications. Therefore, our main task is to study the security of iproyal through various analysis methods.



# Dynamic analysis

​		We are going to make an analysis from simple to profound.

​		The first thing we should consider is whether iproyal has any impact on local security. 

### Dynamic analysis based on Process Explorer

​		In this section, we use a tool called process explorer, which is a Windows based application monitoring tool that is more powerful than task manager. Through the observation of Process Explorer, we can understand the usage of operating system resources by iproyal at the run time.

​		Run Process Explorer as an administrator to observe the currently active processes.

​		We can observe that the iproyal occupies four processes in total. The basic properties of these processes are shown in the figure. We can note that the iproyal runtime does not occupy a lot of CPU resources.

<img src="Part2.assets/part2-4.png" alt="image-20220607211916920"  />

#### Analyze process performance	

​		Select a process and right-click "properties" to view more detailed information about the process. The following is the "performance" interface in "properties":

<img src="Part2.assets/part2-5.png" alt="image-20220607211916920" style="zoom: 60%;" />

​		We have observed that in the operating system, many attributes of iproyal processes (such as the priority of process resource scheduling and memory usage) are basically consistent with other user mode  applications. 

​		In general, we found that running iproyal does not take up a lot of  resources and has no significant impact on the operation of other applications. 

#### Analyze process security

​		We are more concerned about the security of the program. The following is the "security" interface in "image", and some properties related to program security are listed below:

- DEP (Data Execution Prevention) prevents the application from running the data in the memory used to temporarily store instructions.
- ASLR (Address Space Load Randomization) randomizes addresses make it difficult for attackers to attack.
- CFG (Control Flow Guard) strictly restricts the control flow to prevent memory corruption and software blackmail attacks.
- Stack protection is used to prevent stack overflow vulnerability.

<img src="Part2.assets/part2-6.png" alt="image-20220607211916920" style="zoom: 60%;" />

​		Among the four security application attributes, iproyal has enabled three of them, but not stack protection. 

​		At the same time, we also observed these security attributes of several other applications we are more familiar with for comparison. These applications also do not turn on stack protection. In addition, many applications, including QQ.exe, have not even turned on CFG protection, so iproyal is relatively safe by comparison.

​		In the dynamic analysis phase, in general, no suspicious aspects of the iproyal program were found.



# Static Analysis

​		Next, we conduct a static analysis in the hope that more means can be used to detect whether the program has vulnerabilities.

### Static analysis based on VirusTotal

​		At this stage, we use VirusTotal (https://www.virustotal.com/) to analyze program security online.

<img src="Part2.assets/part2-7.png" alt="image-20220607211916920" style="zoom: 50%;" />

​		VirusTotal is a website that provides free suspicious file analysis services. It analyzes suspicious files, domains, IPs and URLs to detect malware and other breaches, automatically share them with the security community. Relevant analysis results are provided online by major security vendors.

#### Analyze windows application

​		First, we submit the windows based iproyal application (iproyal.exe) to VirusTotal for online analysis.

<img src="Part2.assets/part2-8.png" alt="image-20220607211916920" style="zoom: 40%;" />

​		The results show that among the 63 security vendors that gave the results, only Grdinsoft has analyzed the vulnerabilities. The type of vulnerability it found is "Trojan.Gen.dd!c"

​		About "trojan.gen.dd! C", no very detailed information can be found. However, we found that "trojan.generic" is a computer Trojan virus, so we suspect that "trojan.gen.dd! C" is a derivative of this virus.

<img src="Part2.assets/part2-9.png" alt="image-20220607211916920" style="zoom: 50%;" />

​		However, since the number of suppliers proposing this vulnerability is very small, it is not ruled out that it is a false positive.

#### Analyze android application

​		Next, we submit the android based iproyal application (iproyal.apk) to VirusTotal for online analysis.

<img src="Part2.assets/part2-10.png" alt="image-20220607211916920" style="zoom: 40%;" />

​		It can be seen that the vulnerability seems to be greater for android applications. Among the 60 vendors, 8 have found the vulnerabilities.

​		There is still little specific information about these vulnerabilities on the network. However, based on this, we have reason to believe that android platform iproyal applications are more risky than windows platform iproyal applications.

​		Further, we can view the IP addresses associated with the application on this page.

<img src="Part2.assets/part2-11.png" alt="image-20220607211916920" style="zoom: 50%;" />

​		What we find interesting is that one of the IP addresses 31.13.71.1 points to Facebook, and some security providers also mark this IP address as malicious.

​		Continue to analyze the files related to this IP address and find that the positive rate has greatly increased.

<img src="Part2.assets/part2-12.png" alt="image-20220607211916920" style="zoom: 50%;" />

​		Therefore, it is concluded that for the samples of files, URLs or IPs, security is the label of their clustering. In other words, the more dangerous a sample is, in addition to its own insecurity, it is also more likely to have more frequent contact with other dangerous samples, and vice versa. We found that the samples directly related to the iproyal are generally relatively safe, so the security of the iproyal can also be guaranteed to a certain extent.





# Traffic Analysis









# Discussion and Conclusion
